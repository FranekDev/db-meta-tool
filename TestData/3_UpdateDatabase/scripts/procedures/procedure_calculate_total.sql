SET TERM ^ ;

CREATE PROCEDURE CALCULATE_ORDER_TOTAL (ORDER_ID BIGINT)
RETURNS (TOTAL DECIMAL(15,2))
AS
BEGIN
  SELECT SUM(QUANTITY * UNIT_PRICE)
  FROM ORDER_ITEMS
  WHERE ORDER_ID = :ORDER_ID
  INTO :TOTAL;

  IF (TOTAL IS NULL) THEN
    TOTAL = 0;
END^

SET TERM ; ^
